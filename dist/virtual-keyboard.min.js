(()=>{"use strict";function aa(b,d){var e="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(!e){if(Array.isArray(b)||(e=function(a,b){if(a){if("string"==typeof a)return ba(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?ba(a,b):void 0}}(b))||d&&b&&"number"==typeof b.length){e&&(b=e);var f=0,g=function(){};return{s:g,n:function(){return f>=b.length?{done:!0}:{done:!1,value:b[f++]}},e:function(a){throw a},f:g}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,i=!0,j=!1;return{s:function(){e=e.call(b)},n:function(){var a=e.next();return i=a.done,a},e:function(a){j=!0,h=a},f:function(){try{i||null==e.return||e.return()}finally{if(j)throw h}}}}function ba(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function e(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function r(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function i(a){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ca(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function u(a,b,c){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&null!==(a=f(a)););return a}(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}})(a,b,c||a)}function n(a,b){return(n=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function da(a,b){return b&&("object"===i(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function f(a){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function ea(a){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function fa(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function d(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function v(a,b){return(v=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function ga(a,b){return b&&("object"===ea(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function m(a){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function ha(a){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ia(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function O(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function k(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function E(a,b){return(E=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function ja(a,b){return b&&("object"===ha(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function S(a){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function ka(a){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function la(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function T(a,b,c){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&null!==(a=A(a)););return a}(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}})(a,b,c||a)}function ma(a,b){return(ma=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function na(a,b){return b&&("object"===ka(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function A(a){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function oa(a){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function pa(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function V(a,b,c){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&null!==(a=H(a)););return a}(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}})(a,b,c||a)}function qa(a,b){return(qa=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function ra(a,b){return b&&("object"===oa(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function H(a){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function sa(a){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ta(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function F(a,b){return(F=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function ua(a,b){return b&&("object"===sa(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function q(a){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function va(a){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function wa(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function W(a,b,c){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&null!==(a=Z(a)););return a}(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}})(a,b,c||a)}function xa(a,b){return(xa=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function ya(a,b){return b&&("object"===va(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function Z(a){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function za(a){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function Aa(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Ba(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function Ca(a,b){return(Ca=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function Da(a,b){return b&&("object"===za(b)||"function"==typeof b)?b:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a)}function Ea(a){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function Fa(b,d){var e="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(!e){if(Array.isArray(b)||(e=Ga(b))||d&&b&&"number"==typeof b.length){e&&(b=e);var f=0,g=function(){};return{s:g,n:function(){return f>=b.length?{done:!0}:{done:!1,value:b[f++]}},e:function(a){throw a},f:g}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,j=!0,k=!1;return{s:function(){e=e.call(b)},n:function(){var a=e.next();return j=a.done,a},e:function(a){k=!0,h=a},f:function(){try{j||null==e.return||e.return()}finally{if(k)throw h}}}}function Ga(a,b){if(a){if("string"==typeof a)return Ha(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Ha(a,b):void 0}}function Ha(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function Ia(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}var Ja={d:(a,b)=>{for(var c in b)Ja.o(b,c)&&!Ja.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:b[c]})},o:(a,b)=>Object.prototype.hasOwnProperty.call(a,b)};Ja.d({},{w:()=>Ma});var Ka=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._components=[],this._owner=b}var b,c;return b=a,(c=[{key:"owner",get:function(){return this._owner}},{key:"length",get:function(){return this._components.length}},{key:"init",value:function(){var a,b=aa(this._components);try{for(b.s();!(a=b.n()).done;)a.value.init(this._owner)}catch(a){b.e(a)}finally{b.f()}}},{key:"setup",value:function(a){var b,c=aa(this._components);try{for(c.s();!(b=c.n()).done;)b.value.setup(a)}catch(a){c.e(a)}finally{c.f()}}},{key:"onVirtualKeyboardOpen",value:function(a){var b,c=aa(this._components);try{for(c.s();!(b=c.n()).done;)b.value.onVirtualKeyboardOpen(a)}catch(a){c.e(a)}finally{c.f()}}},{key:"onVirtualKeyboardOpened",value:function(a){var b,c=aa(this._components);try{for(c.s();!(b=c.n()).done;)b.value.onVirtualKeyboardOpened(a)}catch(a){c.e(a)}finally{c.f()}}},{key:"onVirtualKeyboardClose",value:function(a){var b,c=aa(this._components);try{for(c.s();!(b=c.n()).done;)b.value.onVirtualKeyboardClose(a)}catch(a){c.e(a)}finally{c.f()}}},{key:"onVirtualKeyboardClosed",value:function(a){var b,c=aa(this._components);try{for(c.s();!(b=c.n()).done;)b.value.onVirtualKeyboardClosed(a)}catch(a){c.e(a)}finally{c.f()}}},{key:"add",value:function(){for(var b,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];for(var g,h=(b=this._components).push.apply(b,e),j=0,k=e;j<k.length;j++)g=k[j],g.init(this._owner);return h}},{key:"remove",value:function(a){var b,c=-1,d=aa(this._components);try{for(d.s();!(b=d.n()).done;){var e=b.value;if(c++,a===e)break}}catch(a){d.e(a)}finally{d.f()}0<=c&&this.removeAt(c,1)}},{key:"removeAt",value:function(a,b){this._components.splice(a,b)}},{key:"toArray",value:function(){return this._components.slice()}}])&&e(b.prototype,c),a}(),o=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._isInitialized=!1,this.components=new Ka(this)}var b,c;return b=a,(c=[{key:"isInitialized",get:function(){return this._isInitialized}},{key:"containerElement",get:function(){return this._containerElement}},{key:"element",get:function(){return this._element}},{key:"owner",get:function(){if(!this._owner)throw new Error("The owner has not been defined (yet).");return this._owner}},{key:"parent",get:function(){return this._owner instanceof a?this._owner:void 0}},{key:"virtualKeyboard",get:function(){var a;return this._owner instanceof Ma?this._owner:null===(a=this._owner)||void 0===a?void 0:a.virtualKeyboard}},{key:"init",value:function(a){this._owner=a,this.isInitialized||(this.onInit(),this.components.init(),this._isInitialized=!0,this.onInitDone())}},{key:"setup",value:function(a){var b;if(this._containerElement=a,!this.containerElement)throw new Error("The containerElement is missing.");this._element=this.onSetup(),this.element&&a.appendChild(this.element),this.components.setup(null!==(b=this.element)&&void 0!==b?b:a),this.onSetupDone()}},{key:"onInitDone",value:function(){}},{key:"onSetupDone",value:function(){}},{key:"onDisabled",value:function(){}},{key:"onEnabled",value:function(){}},{key:"onVirtualKeyboardOpen",value:function(){}},{key:"onVirtualKeyboardOpened",value:function(){}},{key:"onVirtualKeyboardClose",value:function(){}},{key:"onVirtualKeyboardClosed",value:function(){}}])&&r(b.prototype,c),a}(),a=function(b){function c(a){var b;return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),(b=j.call(this)).key=a,b._withinDblclickThreshold=!1,b._showSpecialCharacters=!1,b.handleDblclickEvent=!1,b}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&n(a,b)}(c,b);var a,d,g,h,j=(g=c,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=f(g);if(h){var c=f(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return da(this,a)});return a=c,(d=[{key:"parent",get:function(){return u(f(c.prototype),"parent",this)}},{key:"onInit",value:function(){}},{key:"onSetup",value:function(){var a,b=this,c=document.createElement("button");return c.type="button",c.classList.add("".concat(this.virtualKeyboard.cssClassName,"__key")),c.addEventListener("mousedown",function(a){return b.onKeyDown(a)}),c.addEventListener("mouseup",function(a){return b.onKeyUp(a)}),c.addEventListener("click",function(a){return b.onKeyPress(a)}),c.addEventListener("longpress",function(a){return b.onKeyLongPress(a)}),this.key&&(c.dataset.value=this.key.value,c.dataset.valueUppercase=null!==(a=this.key.uppercaseValue)&&void 0!==a?a:this.key.value.toUpperCase(),this.key.specialCharacters&&0<this.key.specialCharacters.length&&(c.dataset.specialCharacters=this.key.specialCharacters.join(""))),c}},{key:"appendValue",value:function(a,b){a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value+=b:a.textContent+=b}},{key:"onKeyDown",value:function(a){var b=this;return this._longPressTimer&&window.clearTimeout(this._longPressTimer),this._longPressTimer=window.setTimeout(function(){var c;null===(c=b.element)||void 0===c||c.dispatchEvent(new CustomEvent("longpress",a))},this.virtualKeyboard.options.longPressThreshold),!a.cancelBubble}},{key:"onKeyUp",value:function(a){return this._longPressTimer&&window.clearTimeout(this._longPressTimer),this._showSpecialCharacters=!1,!a.cancelBubble}},{key:"onKeyPress",value:function(a){var b=this,c=a.target;if(this._showSpecialCharacters&&c.dataset.specialCharacters)return this._showSpecialCharacters=!1,!1;if(!this.virtualKeyboard.focusedElement)return!1;if(this.handleDblclickEvent){if(this._dblclickTimer&&window.clearTimeout(this._dblclickTimer),this._withinDblclickThreshold&&(this._withinDblclickThreshold=!1,!this.onKeyDoublePress(a)))return!1;this._withinDblclickThreshold=!0,this._dblclickTimer=window.setTimeout(function(){b._withinDblclickThreshold=!1},this.virtualKeyboard.options.dblclickThreshold)}if(c.dataset.value){var d=c.dataset.valueUppercase,e=d&&this.virtualKeyboard.capsActive?d:c.dataset.value,f=this.virtualKeyboard.focusedElement;this.appendValue(f,e),this.virtualKeyboard.capsActive&&!this.virtualKeyboard.capsLocked&&(this.virtualKeyboard.capsActive=!1)}return!a.cancelBubble}},{key:"onKeyDoublePress",value:function(a){return!a.cancelBubble}},{key:"onKeyLongPress",value:function(a){if(a.target.dataset.specialCharacters){if(!this.virtualKeyboard.options.allowSpecialCharacters)return!1;this._showSpecialCharacters=!0}return!a.cancelBubble}}])&&ca(a.prototype,d),c}(o),p=function(b){function c(a){var b;return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),(b=k.call(this)).keys=a,b}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&v(a,b)}(c,b);var f,g,h,j,k=(h=c,j=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=m(h);if(j){var c=m(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return ga(this,a)});return f=c,(g=[{key:"onInit",value:function(){var a,b=function(b,d){var e="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(!e){if(Array.isArray(b)||(e=function(a,b){if(a){if("string"==typeof a)return fa(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?fa(a,b):void 0}}(b))||d&&b&&"number"==typeof b.length){e&&(b=e);var f=0,g=function(){};return{s:g,n:function(){return f>=b.length?{done:!0}:{done:!1,value:b[f++]}},e:function(a){throw a},f:g}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,j=!0,k=!1;return{s:function(){e=e.call(b)},n:function(){var a=e.next();return j=a.done,a},e:function(a){k=!0,h=a},f:function(){try{j||null==e.return||e.return()}finally{if(k)throw h}}}}(this.keys);try{for(b.s();!(a=b.n()).done;){var c=a.value,d=this.createKeyComponent(c);d&&this.components.add(d)}}catch(a){b.e(a)}finally{b.f()}}},{key:"createKeyComponent",value:function(b){return new a(b)}},{key:"onSetup",value:function(){var a=document.createElement("div");return a.classList.add("".concat(this.virtualKeyboard.cssClassName,"__keys-row")),a}}])&&d(f.prototype,g),c}(o),g=function(b){function c(){return O(this,c),h.apply(this,arguments)}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&E(a,b)}(c,b);var a,d,f,g,h=(f=c,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=S(f);if(g){var c=S(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return ja(this,a)});return a=c,(d=[{key:"onInit",value:function(){var a,b=function(b,d){var e="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(!e){if(Array.isArray(b)||(e=function(a,b){if(a){if("string"==typeof a)return ia(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?ia(a,b):void 0}}(b))||d&&b&&"number"==typeof b.length){e&&(b=e);var f=0,g=function(){};return{s:g,n:function(){return f>=b.length?{done:!0}:{done:!1,value:b[f++]}},e:function(a){throw a},f:g}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,j=!0,k=!1;return{s:function(){e=e.call(b)},n:function(){var a=e.next();return j=a.done,a},e:function(a){k=!0,h=a},f:function(){try{j||null==e.return||e.return()}finally{if(k)throw h}}}}(this.virtualKeyboard.keys);try{for(b.s();!(a=b.n()).done;){var c=a.value,d=this.createKeysRowComponent(c);d&&this.components.add(d)}}catch(a){b.e(a)}finally{b.f()}}},{key:"createKeysRowComponent",value:function(a){return new p(a)}},{key:"onSetup",value:function(){var a=document.createElement("div");return a.classList.add("".concat(this.virtualKeyboard.cssClassName,"__keys")),a}}])&&k(a.prototype,d),c}(o),t=function(b){function c(a){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),h.call(this,a)}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&ma(a,b)}(c,b);var a,d,f,g,h=(f=c,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=A(f);if(g){var c=A(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return na(this,a)});return a=c,(d=[{key:"onSetup",value:function(){var a=T(A(c.prototype),"onSetup",this).call(this);return a?(a.classList.add("".concat(this.virtualKeyboard.cssClassName,"__key--control-key")),a.classList.add("".concat(this.virtualKeyboard.cssClassName,"__key--").concat(this.name)),a.innerHTML=this.icon+this.label,a):a}}])&&la(a.prototype,d),c}(a),x=function(b){function c(){var a;return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),(a=h.call(this)).name="caps",a.handleDblclickEvent=!0,a}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&qa(a,b)}(c,b);var a,d,f,g,h=(f=c,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=H(f);if(g){var c=H(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return ra(this,a)});return a=c,(d=[{key:"icon",get:function(){var a;return null!==(a=this.virtualKeyboard.options.capsIcon)&&void 0!==a?a:""}},{key:"label",get:function(){var a;return null!==(a=this.virtualKeyboard.options.capsLabel)&&void 0!==a?a:""}},{key:"onKeyPress",value:function(a){if(!V(H(c.prototype),"onKeyPress",this).call(this,a))return!1;this.virtualKeyboard.capsActive=!this.virtualKeyboard.capsActive;var b="".concat(this.virtualKeyboard.cssClassName,"--caps");this.virtualKeyboard.capsActive?this.virtualKeyboard.containerElement.classList.contains(b)||this.virtualKeyboard.containerElement.classList.add(b):this.virtualKeyboard.containerElement.classList.remove(b),this.virtualKeyboard.capsLocked=!1;var d="".concat(this.virtualKeyboard.cssClassName,"--caps-locked");return this.virtualKeyboard.containerElement.classList.remove(d),!0}},{key:"onKeyDoublePress",value:function(){if("once"===this.virtualKeyboard.options.capsMode)return!1;this.virtualKeyboard.capsLocked=!0;var a="".concat(this.virtualKeyboard.cssClassName,"--caps-locked");return this.virtualKeyboard.containerElement.classList.contains(a)||this.virtualKeyboard.containerElement.classList.add(a),!1}}])&&pa(a.prototype,d),c}(t),P=function(b){function c(){var a;return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),(a=h.call(this,{value:" "})).name="space-bar",a}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&F(a,b)}(c,b);var a,d,f,g,h=(f=c,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=q(f);if(g){var c=q(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return ua(this,a)});return a=c,(d=[{key:"icon",get:function(){var a;return null!==(a=this.virtualKeyboard.options.spaceBarIcon)&&void 0!==a?a:""}},{key:"label",get:function(){var a;return null!==(a=this.virtualKeyboard.options.spaceBarLabel)&&void 0!==a?a:""}},{key:"appendValue",value:function(a,b){a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value+=b:a.innerHTML+="&nbsp;"}}])&&ta(a.prototype,d),c}(t),G=function(b){function c(){var a;return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),(a=h.call(this))._pressAndHold=!1,a.name="backspace",a}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&xa(a,b)}(c,b);var a,d,f,g,h=(f=c,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=Z(f);if(g){var c=Z(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return ya(this,a)});return a=c,(d=[{key:"icon",get:function(){var a;return null!==(a=this.virtualKeyboard.options.backspaceIcon)&&void 0!==a?a:""}},{key:"label",get:function(){var a;return null!==(a=this.virtualKeyboard.options.backspaceLabel)&&void 0!==a?a:""}},{key:"onKeyUp",value:function(a){return!!W(Z(c.prototype),"onKeyUp",this).call(this,a)&&(this._pressAndHold=!1,this._holdInterval&&window.clearInterval(this._holdInterval),!0)}},{key:"onKeyPress",value:function(a){if(!W(Z(c.prototype),"onKeyPress",this).call(this,a))return!1;var b=this.virtualKeyboard.focusedElement;return!!b&&(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement?b.value=0<b.value.length?b.value.substring(0,b.value.length-1):"":b.innerText=0<b.innerText.length?b.innerText.substring(0,b.innerText.length-1):"",!0)}},{key:"onKeyLongPress",value:function(a){var b=this;return this._pressAndHold=!0,this._holdInterval=window.setInterval(function(){b._pressAndHold&&!b.onKeyPress(a)&&(b._pressAndHold=!1)},this.virtualKeyboard.options.pressAndHoldThreshold),W(Z(c.prototype),"onKeyLongPress",this).call(this,a)}}])&&wa(a.prototype,d),c}(t),U=function(b){function c(){return Aa(this,c),h.apply(this,arguments)}!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&Ca(a,b)}(c,b);var a,d,f,g,h=(f=c,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=Ea(f);if(g){var c=Ea(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Da(this,a)});return a=c,(d=[{key:"onInit",value:function(){this.components.add(new x),this.components.add(new P),this.components.add(new G)}},{key:"onSetup",value:function(){var a=document.createElement("div");return a.classList.add("".concat(this.virtualKeyboard.cssClassName,"__control-keys")),a}}])&&Ba(a.prototype,d),c}(o),La={layout:[["1!",["2@","\xB2"],"3#","4$",["5%","\u20AC"],"6^","7&","8*","9(","0)"]].concat([["q","w",["e","\u0119\u0113\u0117\xEA\xE9\xE8\xEB"],"r","t",["y","\xFF\u0133\xFD"],["u","\u016B\xFC\xFA\xFB\xF9"],["i","\u0133\xEC\u012F\xEF\xED\xEE\u012B"],["o","\xF5\u014D\u0153\xF8\xF2\xF6\xF3\xF4"],"p"],[["a","\xE6\xE3\xE5\u0101\xE0\xE1\xE2\xE4"],["s","\u0161\xDF\u015B"],"d","f","g","h",["j","\u0135"],"k","l"],["z","x",["c","\xE7"],"v","b",["n","\xF1"],"m"]]),allowedElements:["input","textarea"],allowSpecialCharacters:!0,backspaceEnabled:!0,capsEnabled:!0,capsLabel:"",capsMode:"both",cssClassName:"virtual-keyboard",dblclickThreshold:350,defaultComponents:function(){return[new g,new U]},language:"en",longPressThreshold:250,openKeyboardOnFocus:!0,pressAndHoldThreshold:50,spaceBarEnabled:!0,spaceBarIcon:"",spaceBarLabel:" ",theme:"default"},Ma=function(){function b(d,e){var f;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),this._targetElements=[],this._keys=[],this._capsActive=!1,this._capsLocked=!1,this.components=new Ka(this),this.test="",b._instances.push(this),this.options=Object.assign(b.defaultOptions,b._globalOptions,e||{}),d&&(this._targetElements=this.parseTargetElements(d)),this._keys=this.parseKeys(null===(f=this.options)||void 0===f?void 0:f.layout),this.options.defaultComponents){var g,h=Fa(this.options.defaultComponents());try{for(h.s();!(g=h.n()).done;){var a=g.value;this.components.add(a)}}catch(a){h.e(a)}finally{h.f()}}this.options.openKeyboardOnFocus&&this.registerFocusEventListeners()}var a,c,d;return a=b,d=[{key:"defaultOptions",get:function(){return La}},{key:"globalOptions",get:function(){return this._globalOptions||this.defaultOptions}},{key:"init",value:function(a){this._globalOptions=Object.assign(this.defaultOptions,a)}}],(c=[{key:"targetElements",get:function(){return this._targetElements}},{key:"focusedElement",get:function(){return this._focusedElement}},{key:"containerElement",get:function(){return this._containerElement}},{key:"cssClassName",get:function(){return this.options.cssClassName||"virtual-keyboard"}},{key:"keys",get:function(){return this._keys}},{key:"capsActive",get:function(){return this._capsActive},set:function(a){if(this._capsActive=a,this._containerElement){var b="".concat(this.cssClassName,"--caps");a&&!this._containerElement.classList.contains(b)?this._containerElement.classList.add(b):a||this._containerElement.classList.remove(b)}}},{key:"capsLocked",get:function(){return this._capsLocked},set:function(a){this._capsLocked=a}},{key:"open",value:function(a){var c,d=Fa(b._instances);try{for(d.s();!(c=d.n()).done;)c.value.close()}catch(a){d.e(a)}finally{d.f()}if(-1===this.targetElements.indexOf(a))throw new Error("Could not open VirtualKeyboard for the target element.");this._focusedElement=a,this._containerElement||this.setup(),this.components.onVirtualKeyboardOpen(a),this.components.onVirtualKeyboardOpened(a)}},{key:"close",value:function(){if(this._containerElement){var a=this._focusedElement;this.components.onVirtualKeyboardClose(a),this._containerElement.remove(),this._containerElement=void 0,this._focusedElement=void 0,this.components.onVirtualKeyboardClosed(a)}}},{key:"parseTargetElements",value:function(a){if(!this.options.allowedElements||!this.options.allowedElements.length)throw new Error("No allowed elements specified.");if("string"==typeof a&&(a=document.querySelectorAll(a)),a instanceof NodeList||a instanceof HTMLElement){var b=[];if(a instanceof NodeList){var c,d=Fa(a);try{for(d.s();!(c=d.n()).done;){var e=c.value;0<=this.options.allowedElements.indexOf((e.nodeName||"").toLowerCase())&&b.push(e)}}catch(a){d.e(a)}finally{d.f()}}else 0<=this.options.allowedElements.indexOf((a.nodeName||"").toLowerCase())&&b.push(a);return b.length||console.warn("No valid target elements found for VirtualKeyboard."),b}throw new Error("Invalid type specified for selectorOrElements.")}},{key:"setup",value:function(){this._containerElement=this.createContainerElement(),this.components.setup(this.containerElement)}},{key:"registerFocusEventListeners",value:function(){var a,b=this,c=Fa(this.targetElements);try{var d=function(){var c=a.value;c.addEventListener("focus",function(){b.options.openKeyboardOnFocus&&b.open(c)})};for(c.s();!(a=c.n()).done;)d()}catch(a){c.e(a)}finally{c.f()}}},{key:"createContainerElement",value:function(){var a=document.createElement("div");return a.classList.add(this.cssClassName),a.classList.add("".concat(this.cssClassName,"--theme-").concat(this.options.theme||"default")),this.capsActive&&a.classList.add("".concat(this.cssClassName,"--caps")),this.options.id&&(a.id=this.options.id),document.body.appendChild(a),a}},{key:"parseKeys",value:function(b){if(!b)throw new Error("Missing keys layout.");var d,f,g=[],h=Fa("string"==typeof b?this.downloadKeysJson(b):b);try{for(h.s();!(d=h.n()).done;){var j,k=d.value,a=[],c=Fa(k);try{for(c.s();!(j=c.n()).done;){var l=j.value;"string"==typeof l?a.push({value:l[0],uppercaseValue:1<l.length?l[1]:void 0}):a.push({value:l[0][0],uppercaseValue:1<l[0].length?l[0][1]:void 0,specialCharacters:1<l.length?(f=l[1],function(a){if(Array.isArray(a))return Ha(a)}(f)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(f)||Ga(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):[]})}}catch(a){c.e(a)}finally{c.f()}g.push(a)}}catch(a){h.e(a)}finally{h.f()}return g}},{key:"downloadKeysJson",value:function(){return[]}}])&&Ia(a.prototype,c),d&&Ia(a,d),b}();Ma._instances=[]})();
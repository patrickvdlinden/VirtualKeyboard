(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.d({},{w:()=>_t});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._components=[],this._owner=e}var n,o;return n=t,(o=[{key:"owner",get:function(){return this._owner}},{key:"length",get:function(){return this._components.length}},{key:"init",value:function(){var t,n=e(this._components);try{for(n.s();!(t=n.n()).done;)t.value.init(this._owner)}catch(t){n.e(t)}finally{n.f()}}},{key:"setup",value:function(t){var n,r=e(this._components);try{for(r.s();!(n=r.n()).done;)n.value.setup(t)}catch(t){r.e(t)}finally{r.f()}}},{key:"onVirtualKeyboardOpen",value:function(t){var n,r=e(this._components);try{for(r.s();!(n=r.n()).done;)n.value.onVirtualKeyboardOpen(t)}catch(t){r.e(t)}finally{r.f()}}},{key:"onVirtualKeyboardOpened",value:function(t){var n,r=e(this._components);try{for(r.s();!(n=r.n()).done;)n.value.onVirtualKeyboardOpened(t)}catch(t){r.e(t)}finally{r.f()}}},{key:"onVirtualKeyboardClose",value:function(t){var n,r=e(this._components);try{for(r.s();!(n=r.n()).done;)n.value.onVirtualKeyboardClose(t)}catch(t){r.e(t)}finally{r.f()}}},{key:"onVirtualKeyboardClosed",value:function(t){var n,r=e(this._components);try{for(r.s();!(n=r.n()).done;)n.value.onVirtualKeyboardClosed(t)}catch(t){r.e(t)}finally{r.f()}}},{key:"add",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=(t=this._components).push.apply(t,n),i=0,a=n;i<a.length;i++){var c=a[i];c.init(this._owner)}return o}},{key:"remove",value:function(t){var n,r=-1,o=e(this._components);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(r++,t===i)break}}catch(t){o.e(t)}finally{o.f()}r>=0&&this.removeAt(r,1)}},{key:"removeAt",value:function(t,e){this._components.splice(t,e)}},{key:"toArray",value:function(){return this._components.slice()}}])&&r(n.prototype,o),t}();function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isInitialized=!1,this.components=new o(this)}var e,n;return e=t,(n=[{key:"isInitialized",get:function(){return this._isInitialized}},{key:"containerElement",get:function(){return this._containerElement}},{key:"element",get:function(){return this._element}},{key:"owner",get:function(){if(!this._owner)throw new Error("The owner has not been defined (yet).");return this._owner}},{key:"parent",get:function(){return this._owner instanceof t?this._owner:void 0}},{key:"virtualKeyboard",get:function(){var t;return this._owner instanceof _t?this._owner:null===(t=this._owner)||void 0===t?void 0:t.virtualKeyboard}},{key:"init",value:function(t){this._owner=t,this.isInitialized||(this.onInit(),this.components.init(),this._isInitialized=!0,this.onInitDone())}},{key:"setup",value:function(t){var e;if(this._containerElement=t,!this.containerElement)throw new Error("The containerElement is missing.");this._element=this.onSetup(),this.element&&t.appendChild(this.element),this.components.setup(null!==(e=this.element)&&void 0!==e?e:t),this.onSetupDone()}},{key:"onInitDone",value:function(){}},{key:"onSetupDone",value:function(){}},{key:"onDisabled",value:function(){}},{key:"onEnabled",value:function(){}},{key:"onVirtualKeyboardOpen",value:function(t){}},{key:"onVirtualKeyboardOpened",value:function(t){}},{key:"onVirtualKeyboardClose",value:function(t){}},{key:"onVirtualKeyboardClosed",value:function(t){}}])&&i(e.prototype,n),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(r);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return f(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).key=t,e._withinDblclickThreshold=!1,e._showSpecialCharacters=!1,e.handleDblclickEvent=!1,e}return e=a,(n=[{key:"parent",get:function(){return s(y(a.prototype),"parent",this)}},{key:"onInit",value:function(){}},{key:"onSetup",value:function(){var t,e=this,n=document.createElement("button");return n.type="button",n.classList.add("".concat(this.virtualKeyboard.cssClassName,"__button")),n.classList.add("".concat(this.virtualKeyboard.cssClassName,"__key")),n.addEventListener("mousedown",(function(t){return e.onKeyDown(t)})),n.addEventListener("mouseup",(function(t){return e.onKeyUp(t)})),n.addEventListener("click",(function(t){return e.onKeyPress(t)})),n.addEventListener("longpress",(function(t){return e.onKeyLongPress(t)})),this.key&&(n.dataset.value=this.key.value,n.dataset.valueUppercase=null!==(t=this.key.uppercaseValue)&&void 0!==t?t:this.key.value.toUpperCase(),this.key.specialCharacters&&this.key.specialCharacters.length>0&&(n.dataset.specialCharacters=this.key.specialCharacters.join(""))),n}},{key:"appendValue",value:function(t,e){t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?t.value+=e:t.textContent+=e}},{key:"onKeyDown",value:function(t){var e=this;return this._longPressTimer&&window.clearTimeout(this._longPressTimer),this._longPressTimer=window.setTimeout((function(){var n;null===(n=e.element)||void 0===n||n.dispatchEvent(new CustomEvent("longpress",t))}),this.virtualKeyboard.options.longPressThreshold),!t.cancelBubble}},{key:"onKeyUp",value:function(t){return this._longPressTimer&&window.clearTimeout(this._longPressTimer),this._showSpecialCharacters=!1,!t.cancelBubble}},{key:"onKeyPress",value:function(t){var e=this,n=t.target;if(this._showSpecialCharacters&&n.dataset.specialCharacters)return this._showSpecialCharacters=!1,!1;if(!this.virtualKeyboard.focusedElement)return!1;if(this.handleDblclickEvent){if(this._dblclickTimer&&window.clearTimeout(this._dblclickTimer),this._withinDblclickThreshold&&(this._withinDblclickThreshold=!1,!this.onKeyDoublePress(t)))return!1;this._withinDblclickThreshold=!0,this._dblclickTimer=window.setTimeout((function(){e._withinDblclickThreshold=!1}),this.virtualKeyboard.options.dblclickThreshold)}if(n.dataset.value){var r=n.dataset.valueUppercase,o=r&&this.virtualKeyboard.capsActive?r:n.dataset.value,i=this.virtualKeyboard.focusedElement;i&&null!=o&&o.length>0&&this.appendValue(i,o),this.virtualKeyboard.capsActive&&!this.virtualKeyboard.capsLocked&&(this.virtualKeyboard.capsActive=!1)}return!t.cancelBubble}},{key:"onKeyDoublePress",value:function(t){return!t.cancelBubble}},{key:"onKeyLongPress",value:function(t){if(t.target.dataset.specialCharacters){if(!this.virtualKeyboard.options.allowSpecialCharacters)return!1;this._showSpecialCharacters=!0}return!t.cancelBubble}}])&&u(e.prototype,n),a}(a);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(r);if(o){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return m(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).keys=t,e}return e=a,(n=[{key:"onInit",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.keys);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=this.createKeyComponent(n);r&&this.components.add(r)}}catch(t){e.e(t)}finally{e.f()}}},{key:"createKeyComponent",value:function(t){return new p(t)}},{key:"onSetup",value:function(){var t=document.createElement("div");return t.classList.add("".concat(this.virtualKeyboard.cssClassName,"__keys-row")),t}}])&&b(e.prototype,n),a}(a);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function a(){return k(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"onInit",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.virtualKeyboard.keys);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=this.createKeysRowComponent(n);r&&this.components.add(r)}}catch(t){e.e(t)}finally{e.f()}}},{key:"createKeysRowComponent",value:function(t){return new g(t)}},{key:"onSetup",value:function(){var t=document.createElement("div");return t.classList.add("".concat(this.virtualKeyboard.cssClassName,"__keys")),t}}])&&E(e.prototype,n),a}(a);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I(r);if(o){var n=I(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return A(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"onSetup",value:function(){var t=R(I(a.prototype),"onSetup",this).call(this);return t?(t.classList.add("".concat(this.virtualKeyboard.cssClassName,"__key--control-key")),t.classList.add("".concat(this.virtualKeyboard.cssClassName,"__key--").concat(this.name)),t.innerHTML=this.icon+this.label,t):t}}])&&T(e.prototype,n),a}(p);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(r);if(o){var n=H(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return M(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).name="caps",t.handleDblclickEvent=!0,t}return e=a,(n=[{key:"icon",get:function(){var t;return null!==(t=this.virtualKeyboard.options.capsIcon)&&void 0!==t?t:""}},{key:"label",get:function(){var t;return null!==(t=this.virtualKeyboard.options.capsLabel)&&void 0!==t?t:""}},{key:"onKeyPress",value:function(t){return!!N(H(a.prototype),"onKeyPress",this).call(this,t)&&(this.virtualKeyboard.capsActive=!this.virtualKeyboard.capsActive,this.virtualKeyboard.capsLocked=!1,!0)}},{key:"onKeyDoublePress",value:function(t){return"once"===this.virtualKeyboard.options.capsMode||(this.virtualKeyboard.capsActive=!0,this.virtualKeyboard.capsLocked=!0),!1}}])&&D(e.prototype,n),a}(x);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=J(r);if(o){var n=J(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return q(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,{value:" "})).name="space-bar",t}return e=a,(n=[{key:"icon",get:function(){var t;return null!==(t=this.virtualKeyboard.options.spaceBarIcon)&&void 0!==t?t:""}},{key:"label",get:function(){var t;return null!==(t=this.virtualKeyboard.options.spaceBarLabel)&&void 0!==t?t:""}},{key:"appendValue",value:function(t,e){0!==e.length&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?t.value+=e:t.innerHTML.substr(-e.length,e.length)===e?t.innerHTML+="&nbsp;":t.innerHTML+=e)}}])&&F(e.prototype,n),a}(x);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e,n){return(X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(r);if(o){var n=tt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Z(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this))._pressAndHold=!1,t.name="backspace",t}return e=a,(n=[{key:"icon",get:function(){var t;return null!==(t=this.virtualKeyboard.options.backspaceIcon)&&void 0!==t?t:""}},{key:"label",get:function(){var t;return null!==(t=this.virtualKeyboard.options.backspaceLabel)&&void 0!==t?t:""}},{key:"onKeyUp",value:function(t){return!!X(tt(a.prototype),"onKeyUp",this).call(this,t)&&(this._pressAndHold=!1,this._holdInterval&&window.clearInterval(this._holdInterval),!0)}},{key:"onKeyPress",value:function(t){if(!X(tt(a.prototype),"onKeyPress",this).call(this,t))return!1;var e=this.virtualKeyboard.focusedElement;return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value=e.value.length>0?e.value.substring(0,e.value.length-1):"":e.innerText=e.innerText.length>0?e.innerText.substring(0,e.innerText.length-1):"",!0)}},{key:"onKeyLongPress",value:function(t){var e=this;return this._pressAndHold=!0,this._holdInterval=window.setInterval((function(){e._pressAndHold&&!e.onKeyPress(t)&&(e._pressAndHold=!1)}),this.virtualKeyboard.options.pressAndHoldThreshold),X(tt(a.prototype),"onKeyLongPress",this).call(this,t)}}])&&W(e.prototype,n),a}(x);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ct(r);if(o){var n=ct(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return at(this,t)});function a(){return rt(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"onInit",value:function(){this.components.add(new U),this.components.add(new G),this.components.add(new et)}},{key:"onSetup",value:function(){var t=document.createElement("div");return t.classList.add("".concat(this.virtualKeyboard.cssClassName,"__control-keys")),t}}])&&ot(e.prototype,n),a}(a);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pt(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ht(r);if(o){var n=ht(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return pt(this,t)});function a(){return lt(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"onInit",value:function(){}},{key:"onSetup",value:function(){var t=this,e=document.createElement("button");return e.type="button",e.classList.add("".concat(this.virtualKeyboard.cssClassName,"__button")),e.classList.add("".concat(this.virtualKeyboard.cssClassName,"__close")),e.addEventListener("click",(function(){t.virtualKeyboard.close()})),e}}])&&ft(e.prototype,n),a}(a),bt={layout:[["1!",["2@","²"],"3#","4$",["5%","€"],"6^","7&","8*","9(","0)"]].concat([["q","w",["e","ęēėêéèë"],"r","t",["y","ÿĳý"],["u","ūüúûù"],["i","ĳìįïíîī"],["o","õōœøòöóô"],"p"],[["a","æãåāàáâä"],["s","šßś"],"d","f","g","h",["j","ĵ"],"k","l"],["z","x",["c","ç"],"v","b",["n","ñ"],"m"]]),allowedElements:["input","textarea"],allowSpecialCharacters:!0,backspaceEnabled:!0,capsEnabled:!0,capsLabel:"",capsMode:"both",capsStartMode:"once",cssClassName:"virtual-keyboard",dblclickThreshold:350,components:function(){return[new K,new ut,new dt]},language:"en",longPressThreshold:250,openKeyboardOnFocus:!0,pressAndHoldThreshold:50,spaceBarEnabled:!0,spaceBarIcon:"",spaceBarLabel:" ",theme:"default"};function vt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=mt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function mt(t,e){if(t){if("string"==typeof t)return wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _t=function(){function t(e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetElements=[],this._keys=[],this._capsActive=!1,this._capsLocked=!1,this.components=new o(this),t._instances.push(this),this.options=Object.assign({},t.defaultOptions,t.globalOptions,n||{}),this._targetElements=this.parseTargetElements(e),this._keys=this.parseKeys(null===(r=this.options)||void 0===r?void 0:r.layout),this.registerDefaultComponents(),this.registerFocusEventListeners()}var e,n,r;return e=t,r=[{key:"defaultOptions",get:function(){return bt}},{key:"globalOptions",get:function(){return this._globalOptions||{}}},{key:"init",value:function(t){this._globalOptions=Object.assign({},this.defaultOptions,t)}}],(n=[{key:"targetElements",get:function(){return this._targetElements}},{key:"focusedElement",get:function(){return this._focusedElement}},{key:"containerElement",get:function(){return this._containerElement}},{key:"cssClassName",get:function(){return this.options.cssClassName||"virtual-keyboard"}},{key:"keys",get:function(){return this._keys}},{key:"capsActive",get:function(){return this._capsActive},set:function(t){if(this._capsActive=t,this._containerElement){var e="".concat(this.cssClassName,"--caps");t&&!this._containerElement.classList.contains(e)?this._containerElement.classList.add(e):t||this._containerElement.classList.remove(e)}}},{key:"capsLocked",get:function(){return this._capsLocked},set:function(t){if(this._capsLocked=t,this.containerElement){var e="".concat(this.cssClassName,"--caps-lock");t&&!this.containerElement.classList.contains(e)?this.containerElement.classList.add(e):t||this.containerElement.classList.remove(e)}}},{key:"open",value:function(e){var n,r=vt(t._instances);try{for(r.s();!(n=r.n()).done;)n.value.close()}catch(t){r.e(t)}finally{r.f()}if(-1===this.targetElements.indexOf(e))throw new Error("Could not open VirtualKeyboard for the target element.");this._focusedElement=e,this.capsActive="off"!==this.options.capsStartMode,this.capsLocked="lock"===this.options.capsStartMode,this._containerElement||this.setup(),this.components.onVirtualKeyboardOpen(e),this.components.onVirtualKeyboardOpened(e)}},{key:"close",value:function(){if(this._containerElement){var t=this._focusedElement;this.components.onVirtualKeyboardClose(t),this._containerElement.remove(),this._containerElement=void 0,this._focusedElement=void 0,this.components.onVirtualKeyboardClosed(t)}}},{key:"parseTargetElements",value:function(t){if(!t)return[];if(!this.options.allowedElements||!this.options.allowedElements.length)throw new Error("No allowed elements specified.");if("string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof NodeList||t instanceof HTMLElement){var e=[];if(t instanceof NodeList){var n,r=vt(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.options.allowedElements.indexOf((o.nodeName||"").toLowerCase())>=0&&e.push(o)}}catch(t){r.e(t)}finally{r.f()}}else this.options.allowedElements.indexOf((t.nodeName||"").toLowerCase())>=0&&e.push(t);return e.length||console.warn("No valid target elements found for VirtualKeyboard."),e}throw new Error("Invalid type specified for selectorOrElements.")}},{key:"setup",value:function(){this._containerElement=this.createContainerElement(),this.components.setup(this.containerElement)}},{key:"registerDefaultComponents",value:function(){if(this.options.components){var t,e=vt(this.options.components());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.components.add(n)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"registerFocusEventListeners",value:function(){var t=this;if(this.options.openKeyboardOnFocus&&0!==this.targetElements.length){var e,n=vt(this.targetElements);try{var r=function(){var n=e.value;n.addEventListener("focus",(function(){t.options.openKeyboardOnFocus&&t.open(n)}))};for(n.s();!(e=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}}}},{key:"createContainerElement",value:function(){var t=document.createElement("div");return t.classList.add(this.cssClassName),t.classList.add("".concat(this.cssClassName,"--theme-").concat(this.options.theme||"default")),this.capsActive&&t.classList.add("".concat(this.cssClassName,"--caps")),this.capsLocked&&t.classList.add("".concat(this.cssClassName,"--caps-lock")),this.options.id&&(t.id=this.options.id),document.body.appendChild(t),t}},{key:"parseKeys",value:function(t){if(!t)throw new Error("Missing keys layout.");var e,n,r=[],o=vt("string"==typeof t?this.downloadKeysJson(t):t);try{for(o.s();!(e=o.n()).done;){var i,a=e.value,c=[],u=vt(a);try{for(u.s();!(i=u.n()).done;){var s=i.value;"string"==typeof s?c.push({value:s[0],uppercaseValue:s.length>1?s[1]:void 0}):c.push({value:s[0][0],uppercaseValue:s[0].length>1?s[0][1]:void 0,specialCharacters:s.length>1?(n=s[1],function(t){if(Array.isArray(t))return wt(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||mt(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):[]})}}catch(t){u.e(t)}finally{u.f()}r.push(c)}}catch(t){o.e(t)}finally{o.f()}return r}},{key:"downloadKeysJson",value:function(t){return[]}}])&&gt(e.prototype,n),r&&gt(e,r),t}();_t._instances=[]})();